{
  "id": "gt-taskmgr-add-001",
  "title": "Implement Add-Task functionality",
  "intent": "Create a function to add tasks with title, priority, and optional due date to the task manager system",
  "dod": {
    "verifiers": [
      {
        "name": "Module loads without errors",
        "command": "Import-Module '..\TaskManager.psm1' -Force",
        "expect": { "exit_code": 0 },
        "timeout_seconds": 10
      },
      {
        "name": "Add-Task creates a task",
        "command": "$t = Add-Task -Title 'Test' -Priority medium; if ($t.id -gt 0 -and $t.title -eq 'Test') { exit 0 } else { exit 1 }",
        "expect": { "exit_code": 0 },
        "timeout_seconds": 10
      },
      {
        "name": "Add-Task validates title",
        "command": "try { Add-Task -Title ''; exit 1 } catch { exit 0 }",
        "expect": { "exit_code": 0 },
        "timeout_seconds": 10
      },
      {
        "name": "Add-Task supports all priorities",
        "command": "foreach ($p in @('low','medium','high','critical')) { $t = Add-Task -Title 'Test' -Priority $p; if ($t.priority -ne $p) { exit 1 } }; exit 0",
        "expect": { "exit_code": 0 },
        "timeout_seconds": 15
      },
      {
        "name": "Unit tests pass",
        "command": "Invoke-Pester -Path '..\tests\TaskManager.Tests.ps1' -TestName '*Add-Task*' -PassThru | Select-Object -ExpandProperty Result | ForEach-Object { if ($_ -eq 'Passed') { exit 0 } else { exit 1 } }",
        "expect": { "exit_code": 0 },
        "timeout_seconds": 30
      }
    ],
    "evidence_required": true
  },
  "constraints": {
    "max_iterations": 5,
    "time_budget_minutes": 30,
    "allowed_files": ["TaskManager.psm1", "tests/TaskManager.Tests.ps1"]
  },
  "lane": "feature",
  "priority": 2,
  "ralph_meta": {
    "attempt_count": 0,
    "retry_backoff_seconds": 30,
    "executor_version": "ralph-v1.0"
  }
}
